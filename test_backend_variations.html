<!DOCTYPE html>
<html>
<head>
    <title>Test Backend Variations API</title>
    <style>
        body { font-family: monospace; padding: 20px; }
        pre { background: #f5f5f5; padding: 15px; border-radius: 5px; overflow-x: auto; }
        .error { color: red; }
        .success { color: green; }
    </style>
</head>
<body>
    <h1>Backend Variations API Test</h1>

    <button onclick="testLocal()">Test Local Backend (localhost:8000)</button>
    <button onclick="testVercel()">Test Vercel Backend</button>

    <h2>Response:</h2>
    <div id="result"></div>

    <script>
        async function testLocal() {
            await testEndpoint('http://localhost:8000/api/father/RINOS24GRX400/variations', 'Local');
        }

        async function testVercel() {
            const vercelUrl = prompt('Enter your Vercel backend URL (e.g., https://your-backend.vercel.app):');
            if (vercelUrl) {
                await testEndpoint(`${vercelUrl}/api/father/RINOS24GRX400/variations`, 'Vercel');
            }
        }

        async function testEndpoint(url, name) {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = `<p>Testing ${name} backend...</p>`;

            try {
                const response = await fetch(url);
                const data = await response.json();

                console.log('Full response:', data);

                // Extract variation values
                let html = `<h3 class="success">${name} Backend Response:</h3>`;

                if (data.variation_options) {
                    html += '<h4>Variation Options:</h4><pre>';
                    html += JSON.stringify(data.variation_options, null, 2);
                    html += '</pre>';

                    // Check language
                    const jsonStr = JSON.stringify(data.variation_options);
                    if (jsonStr.includes('Farbe') || jsonStr.includes('Größe')) {
                        html += '<p class="success">✅ GERMAN values detected!</p>';
                    } else if (jsonStr.includes('Color') || jsonStr.includes('Size')) {
                        html += '<p class="error">❌ ENGLISH values detected!</p>';
                    }
                }

                if (data.variation_combinations) {
                    html += '<h4>Variation Combinations (first 3):</h4><pre>';
                    html += JSON.stringify(data.variation_combinations.slice(0, 3), null, 2);
                    html += '</pre>';
                }

                html += '<h4>Full Response:</h4><pre>';
                html += JSON.stringify(data, null, 2);
                html += '</pre>';

                resultDiv.innerHTML = html;

            } catch (error) {
                resultDiv.innerHTML = `<p class="error">Error: ${error.message}</p><pre>${error.stack}</pre>`;
            }
        }
    </script>
</body>
</html>
